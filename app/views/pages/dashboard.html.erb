<% content_for(:title, 'My Larder') %>

<div class="wrapper">
  <div class="tbs">
    <a class="tb active" id="tb-favourite" href="#">
      <p>Favourites</p>
    </a>
    <a class="tb" id="tb-recipe" href="#">
      <p>Your recipes</p>
    </a>
  </div>

  <div class="container" id="cont-favourite">
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-lg-4 index-card">
        <% @recipes.each do |recipe| %>
          <%= link_to recipe_path(recipe) do %>
            <div class="card" style="background-image: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.8)), url('<%= cl_image_path(recipe.photo? ? recipe.photo : 'https://kitt.lewagon.com/placeholder/cities/shanghai') %>');">
              <div class="card-category">
                <%= recipe.name %>
              </div>
              <div class="card-servings">
                <%= image_tag('cutlery.svg', size: "30x30", alt: "Servings", class: "cut") %> <%= recipe.servings %>
              </div>
              <div class="card-duration">
                <%= recipe.duration %>min<%= image_tag('hourglass.svg', size: "30x30", alt: "Duration") %>
              </div>
              <% if recipe.favourited?(current_user) %>
                <div class="card-favourite">
                  <%= image_tag('full-star.png', size: "30x30", alt: "Favourite") %>
                </div>
              <% else %>
                <div class="card-favourite">
                  <%= image_tag('empty-star.png', size: "30x30", alt: "Favourite") %>
                </div>
              <% end %>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>

  <div class="container hidden" id="cont-recipe">
    <div class="row">
      <div class="col-xs-12 col-lg-12 offset-lg-1"
        <%= link_to new_recipe_path do %>
            <i class="fa fa-plus-square" aria-hidden="true"></i> Add your own recipe
        <% end %>
        <% @user.recipes.each do |recipe| %>
          <%= link_to recipe_path(recipe) do %>
            <div class="card" style="background-image: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.8)), url('<%= cl_image_path(recipe.photo? ? recipe.photo : 'https://kitt.lewagon.com/placeholder/cities/shanghai') %>');">
              <div class="card-category">
                <%= recipe.name %>
              </div>
              <div class="card-servings">
                <%= image_tag('cutlery.svg', size: "30x30", alt: "Servings", class: "cut") %> <%= recipe.servings %>
              </div>
              <div class="card-duration">
                <%= recipe.duration %>min<%= image_tag('hourglass.svg', size: "30x30", alt: "Duration") %>
              </div>
              <% if recipe.favourited?(current_user) %>
                <div class="card-favourite">
                  <%= image_tag('full-star.png', size: "30x30", alt: "Favourite") %>
                </div>
              <% else %>
                <div class="card-favourite">
                  <%= image_tag('empty-star.png', size: "30x30", alt: "Favourite") %>
                </div>
              <% end %>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>

</div>

<script>
  let favourite = document.getElementById('cont-favourite');
  let recipe = document.getElementById('cont-recipe');
  let tabFav = document.getElementById('tb-favourite');
  let tabRecipe = document.getElementById('tb-recipe');

  tabFav.addEventListener("click", () => {
    favourite.classList.add("show");
    favourite.classList.remove('hidden');
    recipe.classList.remove('show');
    recipe.classList.add('hidden');
    tabFav.classList.add("active");
    tabRecipe.classList.remove("active");
  });

  tabRecipe.addEventListener('click', () => {
    favourite.classList.add("hidden");
    favourite.classList.remove('show');
    recipe.classList.remove('hidden');
    recipe.classList.add('show');
    tabFav.classList.remove("active");
    tabRecipe.classList.add("active");
  })
</script>
